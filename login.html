<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="path/to/LogoPemweb.png" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <title>Eventify</title>
    <style>
      .gradient-custom-2 {
        background: linear-gradient(
          to right,
          #ee7724,
          #d8363a,
          #dd3675,
          #b44593
        );
      }
      .fit-screen {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      @media (min-width: 769px) {
        .gradient-custom-2 {
          border-top-right-radius: 0.3rem;
          border-bottom-right-radius: 0.3rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Login Section -->
    <section
      class="gradient-form fit-screen"
      style="background-color: #eee"
      id="login-section"
    >
      <div class="container py-0 py-sm-4">
        <div class="row d-flex justify-content-center align-items-center">
          <div class="col-xl-10">
            <div class="card rounded-3 text-black">
              <div class="row g-0">
                <div class="col-lg-6">
                  <div class="card-body p-md-5 mx-md-4">
                    <div class="text-center">
                      <img src="img/logo.png" style="width: 185px" alt="logo" />
                    </div>
                    <div class="text-center mt-3">
                      <b><p>Please login to your account</p></b>
                    </div>
                    <div class="card p-3">
                      <form id="login-form">
                        <div class="form-outline mb-3">
                          <label class="form-label" for="login-email"
                            >Email</label
                          >
                          <input
                            type="email"
                            id="login-email"
                            class="form-control"
                            name="email"
                            placeholder="Email Address"
                            required
                          />
                        </div>
                        <div class="form-outline mb-3">
                          <label class="form-label" for="login-password"
                            >Password</label
                          >
                          <input
                            type="password"
                            id="login-password"
                            class="form-control"
                            name="password"
                            placeholder="Password"
                            required
                          />
                        </div>
                        <div
                          class="d-flex flex-column align-items-center justify-content-center"
                        >
                          <button
                            type="submit"
                            class="btn btn-primary btn-block fa-lg gradient-custom-2"
                          >
                            Log in
                          </button>
                          <a
                            href="#"
                            id="show-register-form"
                            class="mb-0 mt-2"
                            style="font-size: 15px; text-decoration: none"
                            >Don't have an account? Create new!!</a
                          >
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
                <div
                  class="col-lg-6 d-flex align-items-center gradient-custom-2"
                >
                  <div class="text-white px-3 py-4 p-md-5 mx-md-4">
                    <h4 class="mb-4">We are more than just a company</h4>
                    <p class="small mb-0">
                      Eventify is your go-to destination for uncovering and
                      experiencing the best festivals around you. Our platform
                      provides detailed information on a wide range of events,
                      including music, art, cultural, and culinary festivals,
                      ensuring you're always in the know about the latest and
                      greatest festivities. With Eventify, planning your next
                      adventure is a breeze. Dive into the vibrant world of
                      festivals and celebrations with us, and make every moment
                      count at Eventify—where the festivities never end!
                    </p>
                    <hr />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Register Section -->
    <section
      class="gradient-form fit-screen"
      style="background-color: #eee; display: none"
      id="register-section"
    >
      <div class="container py-0 py-sm-4">
        <div class="row d-flex justify-content-center align-items-center">
          <div class="col-xl-10">
            <div class="card rounded-3 text-black">
              <div class="row g-0">
                <div class="col-lg-6">
                  <div class="card-body p-md-5 mx-md-4">
                    <div class="text-center">
                      <img src="img/logo.png" style="width: 185px" alt="logo" />
                    </div>
                    <div class="text-center mt-3">
                      <p><b>Please Register Your Account</b></p>
                    </div>
                    <div class="card p-3">
                      <form id="register-form">
                        <div class="form-outline mb-3">
                          <label class="form-label" for="username"
                            >Username</label
                          >
                          <input
                            type="text"
                            id="username"
                            class="form-control"
                            name="username"
                            placeholder="Username"
                            required
                          />
                        </div>
                        <div class="form-outline mb-3">
                          <label class="form-label" for="email">Email</label>
                          <input
                            type="email"
                            id="email"
                            class="form-control"
                            name="email"
                            placeholder="Email Address"
                            required
                          />
                        </div>
                        <div class="form-outline mb-3">
                          <label class="form-label" for="password"
                            >Password</label
                          >
                          <input
                            type="password"
                            id="password"
                            class="form-control"
                            name="password"
                            placeholder="Password"
                            minlength="6"
                            required
                          />
                        </div>
                        <div class="form-outline mb-3">
                          <label class="form-label" for="cpassword"
                            >Confirm Password</label
                          >
                          <input
                            type="password"
                            id="cpassword"
                            class="form-control"
                            name="cpassword"
                            placeholder="Confirm Password"
                            required
                          />
                          <div
                            class="text-danger mt-1"
                            id="password-error"
                          ></div>
                        </div>
                        <div
                          class="d-flex flex-column align-items-center justify-content-center"
                        >
                          <button
                            type="submit"
                            class="btn btn-primary btn-block fa-lg gradient-custom-2"
                          >
                            Register
                          </button>
                          <a
                            href="#"
                            class="text-center"
                            id="show-login-form"
                            style="font-size: 15px; text-decoration: none"
                            >Already Have an Account? Sign In Here!!</a
                          >
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
                <div
                  class="col-lg-6 d-flex align-items-center gradient-custom-2"
                >
                  <div class="text-white px-3 py-4 p-md-5 mx-md-4">
                    <h4 class="mb-4">We are more than just a company</h4>
                    <p class="small mb-0">
                      Eventify is your go-to destination for uncovering and
                      experiencing the best festivals around you. Our platform
                      provides detailed information on a wide range of events,
                      including music, art, cultural, and culinary festivals,
                      ensuring you're always in the know about the latest and
                      greatest festivities. With Eventify, planning your next
                      adventure is a breeze. Dive into the vibrant world of
                      festivals and celebrations with us, and make every moment
                      count at Eventify—where the festivities never end!
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Firebase Configuration and Initialization -->
    <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-storage.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      var firebaseConfig = {
        apiKey: "AIzaSyA0T7C32rZKp6fE1wl6HPQO-jMdDcOn2lI",
        authDomain: "project3-ccit-4se1.firebaseapp.com",
        databaseURL: "https://project3-ccit-4se1-default-rtdb.firebaseio.com",
        projectId: "project3-ccit-4se1",
        storageBucket: "project3-ccit-4se1.appspot.com",
        messagingSenderId: "1047457157480",
        appId: "1:1047457157480:web:baa725f32b7e7b660946dd",
        measurementId: "G-WWC820B746",
      };
      firebase.initializeApp(firebaseConfig);
      let database = firebase.database();

      $(document).ready(function () {
        $("#show-register-form").click(function () {
          $("#login-section").hide();
          $("#register-section").show();
        });

        $("#show-login-form").click(function () {
          $("#register-section").hide();
          $("#login-section").show();
        });

        $("#register-form").submit(function (event) {
          event.preventDefault();
          const username = $("#username").val();
          const email = $("#email").val();
          const password = $("#password").val();
          const cpassword = $("#cpassword").val();

          if (password !== cpassword) {
            $("#password-error").text("Passwords do not match!");
            return;
          }

          database
            .ref("users/" + database.ref().child("users").push().key)
            .set({
              username: username,
              email: email,
              password: password,
            })
            .then(() => {
              alert("User registered successfully!");
              $("#register-section").hide();
              $("#login-section").show();
            })
            .catch((error) => {
              console.error("Failed to register user: ", error);
              alert("Failed to register user: " + error.message);
            });
        });

        $("#login-form").submit(function (event) {
          event.preventDefault();
          const email = $("#login-email").val();
          const password = $("#login-password").val();

          database
            .ref("users")
            .orderByChild("email")
            .equalTo(email)
            .once("value", (snapshot) => {
              if (snapshot.exists()) {
                snapshot.forEach((userSnapshot) => {
                  const user = userSnapshot.val();
                  if (user.password === password) {
                    alert("Login successful!");
                    window.location.href = "user.html";
                  } else {
                    alert("Invalid password!");
                  }
                });
              } else {
                alert("User not found!");
              }
            })
            .catch((error) => {
              console.error("Failed to login: ", error);
              alert("Failed to login: " + error.message);
            });
        });
      });
    </script>
  </body>
</html>
